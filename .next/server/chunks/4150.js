"use strict";exports.id=4150,exports.ids=[4150],exports.modules={44150:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(53854),i=n(34218),s=n(4206),o=n(38770),c=n(62355),a=n(43958),l=n(18363),u=n(91494),d=n(93072),p=n(81891),x=n(30082),h=n(6715),Z=n(85256),j=n(36375),v=n(34324),b=n.n(v);function m({setCouponCode:e,setTotal:t}){let{product:n}=(0,h.v9)(e=>e),{total:v,shipping:b,subtotal:m}=n.checkout,[f,y]=(0,i.useState)(""),[g,C]=(0,i.useState)(null),[w,S]=(0,i.useState)(null),{mutate:_,isLoading:P}=(0,s.useMutation)(j.applyCouponCode,{onSuccess:({data:n})=>{let r=function(e){let t=new Date;return t>=new Date(e)}(n.expire);if(r){Z.ZP.error("Coupon code is expired!");return}if("percent"===n.type){let r=n.discount;e(f);let i=r/100*m,s=m-i;S(i),C(s+b),t(s+b),Z.ZP.success("Coupon code applied. You have saved "+(0,x.e_)(i))}else{let r=m-n.discount;S(n.discount),t(r),e(f),Z.ZP.success("Coupon code applied. You have saved "+(0,x.e_)(n.discount)),C(r+ +b)}},onError:()=>{Z.ZP.error("Coupon code is not valid")}});return r.jsx(o.Z,{sx:{mb:2},children:(0,r.jsxs)(c.Z,{sx:{py:2},children:[r.jsx(a.Z,{variant:"h4",mb:1,children:"Payment Summary"}),(0,r.jsxs)(l.Z,{spacing:0,mt:1,mb:2,gap:1,children:[(0,r.jsxs)(l.Z,{direction:"row",alignItem:"center",justifyContent:"space-between",spacing:2,children:[r.jsx(a.Z,{variant:"subtitle2",color:"text.secondary",children:"Subtotal:"}),r.jsx(a.Z,{variant:"subtitle2",children:(0,x.e_)(m)})]}),(0,r.jsxs)(l.Z,{direction:"row",alignItem:"center",justifyContent:"space-between",spacing:2,children:[r.jsx(a.Z,{variant:"subtitle2",color:"text.secondary",children:"Discount:"}),(0,r.jsxs)(a.Z,{variant:"subtitle2",children:["-",(0,x.e_)(w||0)]})]}),(0,r.jsxs)(l.Z,{direction:"row",alignItem:"center",justifyContent:"space-between",spacing:2,children:[r.jsx(a.Z,{variant:"subtitle2",color:"text.secondary",children:"Shipping:"}),r.jsx(a.Z,{variant:"subtitle2",children:b?(0,x.e_)(b):"Free"})]}),(0,r.jsxs)(l.Z,{direction:"row",gap:1,children:[r.jsx(u.Z,{id:"coupon-field",fullWidth:!0,placeholder:"Enter coupon code",size:"small",value:f,disabled:!!g,onChange:e=>y(e.target.value)}),r.jsx(p.Z,{loading:P,onClick:()=>{f.length>3?_(f):Z.ZP.error("Enter valid coupon code.")},variant:"contained",color:"primary",disabled:!!g||f.length<4,children:g?"Applied":"Apply"})]})]}),r.jsx(d.Z,{}),(0,r.jsxs)(l.Z,{direction:"row",alignItem:"center",justifyContent:"space-between",spacing:2,mt:2,children:[r.jsx(a.Z,{variant:"subtitle1",children:"Total:"}),r.jsx(a.Z,{variant:"subtitle1",children:(0,x.e_)(g||v)})]})]})})}m.propTypes={setCouponCode:b().func.isRequired,setTotal:b().func.isRequired}},30082:(e,t,n)=>{n.d(t,{e_:()=>c,oe:()=>l,v1:()=>a});var r=n(9633),i=n.n(r),s=n(74292),o=n.n(s);function c(e){let t=new Intl.NumberFormat("en-US",{style:"currency",currency:process.env.CURRENCY||"USD"});return t.format(e).slice(0,-1)}function a(e){return i()(o()(e).format("0.00a"),".00","")}function l(e){return o()(e).format("0.0 b")}}};