"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1654],{21654:function(e,t,r){r.r(t),r.d(t,{default:function(){return F}});var i=r(57437),n=r(2265),a=r(59077),o=r(35843),s=r(44551),l=r(85269),c=r(96507),d=r(38939),u=r(65984),p=r(13457),h=r(21677),x=r(67248),g=r(14604),m=r(5096),j=r(46349),v=r(45564),Z=r(24033),b=r(35691),y=r(92173),f=r(5925),w=r(52072),C=r(37749),D=r(74275),T=r.n(D);F.propTypes={data:T().object,isLoading:T().bool};let q=(0,o.ZP)(l.Z)(e=>{let{theme:t}=e;return{...t.typography.subtitle2,color:t.palette.text.secondary,marginBottom:t.spacing(1),lineHeight:2.5}}),_=["active","deactive"];function F(e){let{data:t,isLoading:r}=e,o=(0,Z.useRouter)(),[l,D]=(0,n.useState)({loading:!1,name:"",search:"",open:!1}),{mutate:T,isLoading:F}=(0,a.useMutation)(t?"update":"new",t?C.updateCategory:C.addCategory,{...t&&{enabled:!!t},retry:!1,onSuccess:e=>{f.ZP.success(e.message),o.push("/dashboard/categories")},onError:e=>{f.ZP.error(e.response.data.message)}}),{mutate:k}=(0,a.useMutation)(C.singleDeleteFile,{onError:e=>{f.ZP.error(e.response.data.message)}}),R=b.Ry().shape({name:b.Z_().required("Name is required"),cover:b.nK().required("Cover is required"),slug:b.Z_().required("Slug is required"),description:b.Z_().required("Description is required"),metaTitle:b.Z_().required("Meta title is required"),metaDescription:b.Z_().required("Meta description is required")}),S=(0,w.TA)({initialValues:{name:(null==t?void 0:t.name)||"",metaTitle:(null==t?void 0:t.metaTitle)||"",cover:(null==t?void 0:t.cover)||null,description:(null==t?void 0:t.description)||"",metaDescription:(null==t?void 0:t.metaDescription)||"",file:(null==t?void 0:t.cover)||"",slug:(null==t?void 0:t.slug)||"",status:(null==t?void 0:t.status)||_[0]},enableReinitialize:!0,validationSchema:R,onSubmit:async e=>{let{...r}=e;try{T({...r,...t&&{currentSlug:t.slug}})}catch(e){console.error(e)}}}),{errors:E,values:P,touched:M,handleSubmit:W,setFieldValue:z,getFieldProps:A}=S,I=async e=>{D({...l,loading:2});let t=e[0];t&&Object.assign(t,{preview:URL.createObjectURL(t)}),z("file",t);let r=new FormData;r.append("file",t),r.append("upload_preset","fezrhfpj"),await y.Z.post("https://api.cloudinary.com/v1_1/docjvlprh/image/upload",r,{onUploadProgress:e=>{let{loaded:t,total:r}=e;D({...l,loading:Math.floor(100*t/r)})}}).then(e=>{let{data:t}=e;z("cover",{_id:t.public_id,url:t.secure_url}),D({...l,loading:!1})}).then(()=>{P.file&&k(P.cover._id),D({...l,loading:!1})}).catch(e=>{e.response?(console.log("Error data:",e.response.data),console.log("Error status:",e.response.status)):e.request?console.log("Request data:",e.request):console.log("Error message:",e.message)})};return(0,i.jsx)(c.Z,{position:"relative",children:(0,i.jsx)(w.Hy,{value:S,children:(0,i.jsx)(w.l0,{noValidate:!0,autoComplete:"off",onSubmit:W,children:(0,i.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(d.ZP,{item:!0,xs:12,md:8,children:(0,i.jsx)(u.Z,{sx:{p:3},children:(0,i.jsxs)(p.Z,{spacing:3,children:[(0,i.jsxs)("div",{children:[r?(0,i.jsx)(h.Z,{variant:"text",width:140}):(0,i.jsxs)(q,{component:"label",htmlFor:"category-name",children:[" ","Category Name"," "]}),r?(0,i.jsx)(h.Z,{variant:"rectangular",width:"100%",height:56}):(0,i.jsx)(x.Z,{id:"category-name",fullWidth:!0,...A("name"),onChange:e=>{let t=e.target.value,r=t.toLowerCase().replace(/[^a-zA-Z0-9\s]+/g,"").replace(/\s+/g,"-");S.setFieldValue("slug",r),S.handleChange(e)},error:!!(M.name&&E.name),helperText:M.name&&E.name})]}),(0,i.jsxs)("div",{children:[r?(0,i.jsx)(h.Z,{variant:"text",width:100}):(0,i.jsx)(q,{component:"label",htmlFor:"meta-title",children:"Meta Title"}),r?(0,i.jsx)(h.Z,{variant:"rectangular",width:"100%",height:56}):(0,i.jsx)(x.Z,{id:"meta-title",fullWidth:!0,...A("metaTitle"),error:!!(M.metaTitle&&E.metaTitle),helperText:M.metaTitle&&E.metaTitle})]}),(0,i.jsxs)("div",{children:[r?(0,i.jsx)(h.Z,{variant:"text",width:70}):(0,i.jsxs)(q,{component:"label",htmlFor:"slug",children:[" ","Slug"]}),r?(0,i.jsx)(h.Z,{variant:"rectangular",width:"100%",height:56}):(0,i.jsx)(x.Z,{fullWidth:!0,id:"slug",...A("slug"),error:!!(M.slug&&E.slug),helperText:M.slug&&E.slug})]}),(0,i.jsxs)("div",{children:[r?(0,i.jsx)(h.Z,{variant:"text",width:100}):(0,i.jsxs)(q,{component:"label",htmlFor:"description",children:[" ","Description"," "]}),r?(0,i.jsx)(h.Z,{variant:"rectangular",width:"100%",height:240}):(0,i.jsx)(x.Z,{fullWidth:!0,id:"description",...A("description"),error:!!(M.description&&E.description),helperText:M.description&&E.description,rows:9,multiline:!0})]})]})})}),(0,i.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)("div",{style:{position:"-webkit-sticky",position:"sticky",top:0},children:(0,i.jsxs)(p.Z,{spacing:3,children:[(0,i.jsx)(u.Z,{sx:{p:3},children:(0,i.jsxs)(p.Z,{spacing:3,children:[(0,i.jsxs)("div",{children:[r?(0,i.jsx)(h.Z,{variant:"text",width:150}):(0,i.jsxs)(q,{component:"label",htmlFor:"meta-description",children:[" ","Meta Description"," "]}),r?(0,i.jsx)(h.Z,{variant:"rectangular",width:"100%",height:240}):(0,i.jsx)(x.Z,{id:"meta-description",fullWidth:!0,...A("metaDescription"),error:!!(M.metaDescription&&E.metaDescription),helperText:M.metaDescription&&E.metaDescription,rows:9,multiline:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(p.Z,{direction:"row",justifyContent:"space-between",children:[r?(0,i.jsx)(h.Z,{variant:"text",width:150}):(0,i.jsx)(q,{variant:"body1",component:"label",color:"text.primary",children:"Image"}),r?(0,i.jsx)(h.Z,{variant:"text",width:150}):(0,i.jsx)(q,{component:"label",htmlFor:"file",children:(0,i.jsx)("span",{children:"512 * 512"})})]}),r?(0,i.jsx)(h.Z,{variant:"rectangular",width:"100%",height:225}):(0,i.jsx)(v.Z,{id:"file",file:P.cover,onDrop:I,error:!!(M.cover&&E.cover),category:!0,accept:"image/*",loading:l.loading}),M.cover&&E.cover&&(0,i.jsx)(g.Z,{error:!0,sx:{px:2,mx:0},children:M.cover&&E.cover})]}),(0,i.jsxs)(m.Z,{fullWidth:!0,sx:{select:{textTransform:"capitalize"}},children:[r?(0,i.jsx)(h.Z,{variant:"text",width:70}):(0,i.jsx)(q,{component:"label",htmlFor:"status",children:"Status"}),r?(0,i.jsx)(h.Z,{variant:"rectangular",width:"100%",height:56}):(0,i.jsxs)(j.Z,{id:"status",native:!0,...A("status"),error:!!(M.status&&E.status),children:[(0,i.jsx)("option",{value:"",style:{display:"none"}}),_.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]}),M.status&&E.status&&(0,i.jsx)(g.Z,{error:!0,sx:{px:2,mx:0},children:M.status&&E.status})]})]})}),r?(0,i.jsx)(h.Z,{variant:"rectangular",width:"100%",height:56}):(0,i.jsx)(s.Z,{type:"submit",variant:"contained",size:"large",loading:F,sx:{ml:"auto",mt:3},children:t?"Edit Category":"Create Category"})]})})})]})})})})}},45564:function(e,t,r){r.d(t,{Z:function(){return g}});var i=r(57437),n=r(74275),a=r.n(n),o=r(35843),s=r(89975),l=r(18687),c=r(96507),d=r(85269),u=r(76639),p=r(22440),h=r(64);let x=(0,o.ZP)("div")(e=>{let{theme:t}=e;return{outline:"none",display:"flex",overflow:"hidden",textAlign:"center",position:"relative",alignItems:"center",flexDirection:"column",justifyContent:"center",padding:t.spacing(5,0),borderRadius:t.shape.borderRadius,transition:t.transitions.create("padding"),backgroundColor:t.palette.background.neutral,border:"1px dashed ".concat(t.palette.grey[50032]),"&:hover":{opacity:.72,cursor:"pointer"},[t.breakpoints.up("md")]:{textAlign:"left",flexDirection:"row"}}});function g(e){let{error:t,file:r,sx:n,onDrop:a,loading:o,...g}=e,{getRootProps:m,getInputProps:j,isDragActive:v,isDragReject:Z,fileRejections:b}=(0,p.uI)({multiple:!1,onDrop:a,...g});return(0,i.jsxs)(c.Z,{sx:{width:"100%",...n},children:[(0,i.jsxs)(x,{...m(),sx:{...v&&{opacity:.72},...(Z||t)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"},...g.category&&{padding:"8px 0"}},children:[o&&(0,i.jsx)(c.Z,{sx:{position:"absolute",top:0,left:0,width:o?"".concat(o,"%"):0,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:e=>(0,s.Fq)(e.palette.primary.main,.8),zIndex:9999},children:(0,i.jsxs)(d.Z,{variant:"h6",color:"text.primary",children:[o,"%"]})}),(0,i.jsx)("input",{...j()}),!g.category&&(0,i.jsx)(u.A,{sx:{width:220}}),(0,i.jsxs)(c.Z,{sx:{p:2,ml:{md:2}},children:[(0,i.jsx)(d.Z,{variant:g.category?"subtitle1":"h5",children:"Drop or Select images"}),g.category?(0,i.jsx)(u.A,{sx:{width:160}}):(0,i.jsxs)(d.Z,{variant:"body2",sx:{color:"text.secondary"},children:["Drop image here or Click","\xa0",(0,i.jsx)(d.Z,{variant:"body2",component:"span",sx:{color:"primary.main",textDecoration:"underline"},children:"Browse"}),"\xa0","Thorough your machine"]})]}),r&&(0,i.jsx)(c.Z,{component:"img",alt:"file preview",src:r.preview?r.preview:r.url,sx:{top:8,borderRadius:1,objectFit:"contain",position:"absolute",width:"calc(100% - 16px)",height:"calc(100% - 16px)",backgroundColor:"background.paper"}})]}),b.length>0&&(0,i.jsx)(()=>(0,i.jsx)(l.Z,{variant:"outlined",sx:{py:1,px:2,mt:3,borderColor:"error.light",bgcolor:e=>(0,s.Fq)(e.palette.error.main,.08)},children:b.map(e=>{let{file:t,errors:r}=e,{path:n,size:a}=t;return(0,i.jsxs)(c.Z,{sx:{my:1},children:[(0,i.jsxs)(d.Z,{variant:"subtitle2",noWrap:!0,children:[n," - ",(0,h.oe)(a)]}),r.map(e=>(0,i.jsxs)(d.Z,{variant:"caption",component:"p",children:["- ",e.message]},e.code))]},n)})}),{})]})}g.propTypes={error:a().bool,file:a().oneOfType([a().string,a().object]),sx:a().object,state:a().object,onDrop:a().func.isRequired,loading:a().number.isRequired}},64:function(e,t,r){r.d(t,{e_:function(){return l},oe:function(){return d},v1:function(){return c}});var i=r(82802),n=r.n(i),a=r(55194),o=r.n(a),s=r(25566);function l(e){let t=new Intl.NumberFormat("en-US",{style:"currency",currency:s.env.CURRENCY||"USD"});return t.format(e).slice(0,-1)}function c(e){return n()(o()(e).format("0.00a"),".00","")}function d(e){return o()(e).format("0.0 b")}}}]);